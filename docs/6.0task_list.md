# Qraft 6.0 开发实现规划表

> 基于 plan6.0.md 的完整开发任务分解表，确保平稳推进实施

## 任务分解与里程碑概览

### 🎯 总体目标
在不自研复杂内核/DSL的前提下，打通"数据 → 特征 → 规则策略回测 → 组合权重 → 审计入库"的单机闭环，并提供一键切换实盘的Runner。

### 📋 执行原则
- ✅ 算法优先、LLM后置增强
- ✅ 最大化引入开源、最小化自研
- ✅ 分层解耦、可复现、可回滚
- ✅ 契约测试驱动、双通道同门槛

---

## 第1阶段：基础架构与数据层（第1-2周）

### ✅ 任务1.1：项目初始化与环境搭建
**预计耗时：2-3天**
- [ ] 创建项目目录结构（mono-repo布局）
- [ ] 设置多Python版本支持（3.10/3.11）
- [ ] 建立constraints文件（stable/candidate双通道）
- [ ] 配置基础CI/CD流水线（linting + 单测）
- [ ] 创建Docker镜像构建脚本
- [ ] 建立Makefile与开发环境快速启动脚本

**交付物：**
- 项目骨架结构
- requirements-stable.txt, requirements-candidate.txt
- constraints/3.10.txt, constraints/3.11.txt
- Dockerfile与docker-compose.yml
- .github/workflows/基础CI配置

### ✅ 任务1.2：策略协议v1设计与实现
**预计耗时：3-4天**
- [ ] 定义策略协议v1的JSONSchema规范
- [ ] 实现算子注册表（operator registry）机制
- [ ] 建立算子白名单与安全约束
- [ ] 实现策略协议校验器（JSONSchema + 静态检查）
- [ ] 创建策略协议示例与测试用例
- [ ] 实现能力协商（capability negotiation）框架

**交付物：**
- qraft/schemas/strategy_v1.json
- qraft/validators/strategy_validator.py
- qraft/operators/registry.py
- 策略协议文档与示例

### ✅ 任务1.3：数据层架构与快照机制
**预计耗时：4-5天**
- [ ] 实现数据快照（snapshot）机制
- [ ] 建立snapshot_id生成规则（内容寻址）
- [ ] 实现交易日历/时区对齐工具
- [ ] 建立复权/连一数据处理流水线
- [ ] 实现CSV/Parquet数据导入器
- [ ] 创建数据版本化与谱系追踪
- [ ] 实现最小样例数据集

**交付物：**
- qraft/data/snapshot.py
- qraft/data/calendar.py
- qraft/data/importers/
- artifacts/data/sample/目录结构
- 数据快照使用文档

### ✅ 任务1.4：特征工程流水线
**预计耗时：3-4天**
- [ ] 实现基础技术指标计算（MA、EMA、RSI等）
- [ ] 建立左闭/滞后/对齐器框架
- [ ] 实现横截面排序与分组中性化
- [ ] 建立NaN传播规则与多源对齐
- [ ] 以Polars Lazy为执行引擎
- [ ] 实现去极值与标准化组件
- [ ] 创建特征流水线单元测试

**交付物：**
- qraft/features/indicators.py
- qraft/features/pipeline.py
- qraft/features/transforms.py
- 特征工程使用示例

---

## 第2阶段：回测引擎与执行层（第3-4周）

### ✅ 任务2.1：vectorbt快速回测适配
**预计耗时：3-4天**
- [ ] 实现vectorbt执行引擎适配器
- [ ] 建立策略表达式解释器（expr→信号）
- [ ] 实现参数网格搜索框架
- [ ] 建立规则模板库（MA交叉、动量、均值回复等）
- [ ] 实现批量回测与结果聚合
- [ ] 创建快速回测性能基准测试

**交付物：**
- qraft/engines/vectorbt_adapter.py
- qraft/interpreters/expression.py
- qraft/strategies/templates/
- 快速回测CLI工具

### 任务2.2：Nautilus Trader精确回测集成
**预计耗时：5-6天**

#### ✅ 任务2.2.1：引擎接入
**预计耗时：2-3天**
- [ ] 在具备 nautilus-trader 环境时，接入 BacktestEngine、Venue、撮合/费用模型
- [ ] 替换 MVP 收益逻辑，实现真实的事件驱动回测
- [ ] 集成市场适配器（Calendar/Contract/Fees）配置
- [ ] 确保与 vectorbt 适配器接口兼容

**交付物：**
- 更新的 qraft/engines/nautilus_adapter.py（真实BacktestEngine集成）
- qraft/adapters/market_adapters.py 完善配置
- qraft/models/cost_models.py 完善撮合/费用模型

#### ✅ 任务2.2.2：CLI 测试（precisebt 子命令覆盖补齐）
**预计耗时：1天**
- [ ] 为 precisebt 子命令补齐单测，覆盖率目标 ≥80%
- [ ] 覆盖关键分支：
  - 依赖缺失友好提示（nautilus-trader 未安装）
  - engine-mode 与 engine-config 组合（文件缺失/解析失败/合并覆盖）
  - 成本参数覆盖（spread/commission/slippage 注入与覆盖、price_impact=linear、min_commission=0）
  - 多符号CSV透视与信号广播（symbol列存在/缺失的双路径）
  - --start/--end 时间切片参数转发
  - Adapter.run 异常路径与错误输出
  - 严格/开发回退模式（allow_fallback_dev 开关）

**交付物：**
- tests/unit/test_cli.py 新增 precisebt 相关测试
- CLI 覆盖率报告（term-missing）
- 轻量使用说明（与 docs/task_2.2.2.md 对齐）

#### ✅ 任务2.2.3：订单生命周期追踪
**预计耗时：2-3天**
- [ ] 实现订单状态监控与追踪
- [ ] 支持部分成交、挂撤改等微观情境
- [ ] 实现滑点/拒单等真实交易情况模拟
- [ ] 建立订单执行统计与报告

**交付物：**
- qraft/execution/order_tracker.py
- 订单生命周期监控工具
- 订单执行统计报表

### ✅ 任务2.3：两阶段回测一致性验证
**预计耗时：2-3天**
- [ ] 实现两阶段回测对比工具
- [ ] 建立一致性验证指标（<2%差异）
- [ ] 实现冷启动复跑验证（<1%波动）
- [ ] 建立成本敏感性测试（±50%）
- [ ] 创建Top-N重叠率计算（≥70%）
- [ ] 实现自动化一致性测试流水线

**交付物：**
- qraft/validation/consistency.py
- 一致性验证报告生成器
- CI中的一致性测试

### ✅ 任务2.4：回测报表与审计包
**预计耗时：3-4天**
- [ ] 实现标准化回测报表生成
- [ ] 建立审计包（audit package）结构
- [ ] 实现Evidence Pack生成机制
- [ ] 建立内容寻址与哈希校验
- [ ] 实现MANIFEST文件生成
- [ ] 创建报表模板与可视化组件

**交付物：**
- qraft/reports/generators.py
- qraft/audit/package.py
- qraft/evidence/pack.py
- 报表模板库

---

## 第3阶段：组合优化与风险管理（第5周）

### ✅ 任务3.1：组合优化引擎集成
**预计耗时：3-4天**
- [ ] 集成PyPortfolioOpt/Riskfolio-Lib
- [ ] 实现MV、HRP、BL优化方法
- [ ] 建立复杂约束CVXPY求解器
- [ ] 实现持仓上下限、行业约束
- [ ] 建立交易成本感知优化
- [ ] 实现可行域预置与warm-start

**交付物：**
- qraft/portfolio/optimizers.py
- qraft/portfolio/constraints.py
- 组合优化配置模板

### ✅ 任务3.2：风险管理与控制
**预计耗时：3-4天**
- [ ] 实现事前风险控制（VaR/ES约束）
- [ ] 建立杠杆与仓位上限控制
- [ ] 实现波动目标与动态缩放
- [ ] 建立行业/风格中性化
- [ ] 实现单票风控与集中度限制
- [ ] 创建风险归因分析工具

**交付物：**
- qraft/risk/controls.py
- qraft/risk/attribution.py
- 风险管理配置模板

### ✅ 任务3.3：质量闸门与验收标准
**预计耗时：2-3天**
- [ ] 实现质量闸门自动化检查
- [ ] 建立双通道同门槛验证
- [ ] 实现泄漏/对齐单元测试
- [ ] 建立性能预算监控
- [ ] 实现工件复现性校验
- [ ] 创建质量报告生成器

**交付物：**
- qraft/quality/gates.py
- 质量闸门CI流水线
- 质量报告模板

---

## 第4阶段：统一Runner与CLI工具（第6周前半）

### ✅ 任务4.1：统一Runner实现
**预计耗时：3-4天**
- [ ] 实现回测/实盘统一Runner
- [ ] 建立策略协议解析与执行
- [ ] 实现参数冻结与配置锁定
- [ ] 建立灰度与回滚机制
- [ ] 实现一键切换实盘接口
- [ ] 创建Runner状态监控

**交付物：**
- qraft/runner/unified_runner.py
- qraft-cli主命令行工具
- Runner配置与使用文档

### ✅ 任务4.2：金套件（Golden Backtests）
**预计耗时：2-3天**
- [ ] 实现3-5个基准策略（MA交叉、动量、均值回复、横截面排序）
- [ ] 建立固定snapshot的金套件数据
- [ ] 实现金套件自动化验证流水线
- [ ] 建立金套件回归检测
- [ ] 创建金套件报告与对比
- [ ] 实现合同测试框架

**交付物：**
- qraft/golden/strategies.py
- artifacts/golden/数据与配置
- 金套件CI流水线

### ✅ 任务4.3：TUI MVP（CLI-first 轻 UI）
**预计耗时：2-3天**
- [ ] 提供 qraft tui 子命令（无守护/无服务端），以终端面板呈现最小信息：Home/Tasks/Run 三个页签；展示进度、耗时、关键指标摘要与日志尾部
- [ ] 技术栈：Rich + prompt_toolkit（默认 extras，可选安装），按需懒加载；若未安装则回退到纯 CLI 提示
- [ ] 交互表单：基础类型校验、默认值与最近使用；支持 Dry-run 预览“即将执行的命令”（安全转义）
- [ ] 运行控制：统一 run_id 与工件目录命名；Ctrl-C 安全中断并清理子进程；CPU/内存开销可见且低于基线
- [ ] 最小远程执行（可选）：读取主机配置（yaml），通过系统 ssh 命令在远端执行 qraft CLI，流式读取 stdout/stderr；不引入会话/队列/守护

**交付物：**
- qraft/cli_impl/tui_cmd.py
- qraft/tui/panels.py
- qraft/tui/forms.py
- docs/examples/tui_mvp.md

### ✅ 任务4.4：最小配方（Recipes）与可复现执行
**预计耗时：2天**
- [ ] 定义 Recipe Manifest（YAML/JSON）：变量占位、默认值、枚举与校验；渲染为 CLI 参数串并提供预览
- [ ] 执行引擎：以子进程方式执行组合出的 CLI，实时流式日志、退出码/错误路径可见；产物路径与 run_id 统一管理
- [ ] 资产化与复用：保存/导入配方与参数预设，提供内置示例（run/search/precisebt/gridsearch）
- [ ] 安全与可复现：严格安全转义，不经 shell 解析传参；支持 --dry-run 输出渲染结果

**交付物：**
- qraft/tui/recipes.py
- qraft/tui/launcher.py
- docs/examples/tui_recipes/

---

## 第5阶段：算法探索增强与策略池化（第6周后半-第7周）

### ✅ 任务5.1：Evidence Pack 规范与产出
**预计耗时：2-3天**
- [ ] 扩展 Evidence Pack：汇总策略、参数、快照签名、关键指标、成本敏感性、环境元数据与哈希；与审计包对齐，版本化 Schema
- [ ] 新增 CLI：qraft evidence build（从回测工件生成/更新 evidence.json），支持内容寻址与去重
- [ ] 增加单测与金套件校验，确保哈希稳定与可复现

**交付物：**
- qraft/evidence/pack.py（增强）
- qraft/cli/evidence_cmd.py
- tests/unit/test_evidence_pack.py
- artifacts/evidence/样例

### ✅ 任务5.2：策略模板与搜索空间库
**预计耗时：2天**
- [ ] 定义基准策略模板与参数网格（MA交叉/动量/均值回复/横截面排序），支持 YAML/JSON 声明式配置
- [ ] 建立算子白名单对齐与静态检查，避免未来函数与窗口泄漏
- [ ] 提供示例与文档

**交付物：**
- qraft/strategies/templates/
- qraft/search/spaces.py
- docs/examples/search_spaces/

### ✅ 任务5.3：搜索编排器（算法通道）
**预计耗时：3-4天**
- [ ] 实现网格/随机搜索最小可用版，支持并发与断点续跑
- [ ] 与 vectorbt 快速回测适配器集成，产出统一指标与工件
- [ ] 选择 Top‑N 候选并固化为 Evidence Pack
- [ ] 新增 CLI：qraft search run --space ... --fast / --precise

**交付物：**
- qraft/search/orchestrator.py
- qraft/cli/search_cmd.py
- tests/unit/test_search_orchestrator.py
- artifacts/search/运行产物

### ✅ 任务5.4：稳健性评估与多重比较偏误治理
**预计耗时：2-3天**
- [ ] 支持 OOS 切分与滚动检验、成本±50%敏感性复测、bootstrap 统计
- [ ] 生成稳健性报告与评分，给出是否进入策略池的建议
- [ ] 将阈值接入质量闸门

**交付物：**
- qraft/validation/robustness.py
- qraft/reports/robustness_report.py
- tests/unit/test_robustness.py

### ✅ 任务5.5：策略池与质量闸门
**预计耗时：2天**
- [ ] 建立 candidate→stable 流程与清单化管理，固定参数与快照
- [ ] 质量闸门集成：两阶段一致性 <2%、冷启动复跑 <1%、Top‑N重叠率 ≥70%
- [ ] 工件登记与可追溯（MANIFEST + 哈希）

**交付物：**
- qraft/strategy_pool/manager.py
- qraft/quality/gates.py（扩展）
- artifacts/pool/结构与清单

### ✅ 任务5.6：CLI/报告/CI 整合
**预计耗时：1-2天**
- [ ] 新增 CLI：qraft pool propose/approve/list，qraft report search-run
- [ ] 在 CI 中串联搜索→稳健性→策略池→金套件
- [ ] 增加端到端示例

**交付物：**
- qraft/cli/pool_cmd.py
- tests/integration/test_search_and_pool.py
- docs/examples/algorithm_channel_e2e/

---

## 第6阶段：监控与上线（第7周）

### ✅ 任务6.1：监控与告警（轻量优先，可选外置）
**预计耗时：2-3天**
- [ ] Prometheus 指标导出器：实现最小导出端点（qraft/monitoring/exporters.py），默认关闭；仅在 CLI 传入 `--metrics-port` 或环境变量 `QRAFT_METRICS_PORT` 时开启；仅暴露与策略/执行有关的计数器与直方图，采用线程安全计数确保与主流程零竞争
- [ ] CLI 开关：为 run/search 等命令增加 `--metrics-port`/`--metrics-addr` 参数，按需启用导出器（不引入 Web UI）
- [ ] Grafana 面板模板：提供 grafana/dashboards/*.json 模板文件，按需导入；默认不随开发环境启动任何 Web 服务
- [ ] 运维集成（可选）：在 docker-compose.yml 中加入 `profiles: ["monitoring"]` 的 Prometheus 与 Grafana 服务，默认关闭，仅在需要时 `--profile monitoring` 启动
- [ ] 研究侧指标：回测耗时、数据装载时延、缓存命中率、网格搜索进度/速度、失败率等
- [ ] 执行侧指标：撮合延迟、成交率、拒单/滑点统计、回撤/波动、风控触发次数等
- [ ] 告警规则与阈值建议：围绕质量闸门、金套件一致性、执行稳定性提供 Prometheus 规则示例
- [ ] 监控与 TUI 协同：TUI 可读取文件化指标或经 SSH 端口转发访问导出器，只作为可选显示层，不改变业务路径

**交付物：**
- qraft/monitoring/exporters.py
- grafana/dashboards/
- docker-compose.yml（profiles: monitoring）
- prometheus/rules/（示例）

### ✅ 任务6.2：灰度与上线流程
**预计耗时：2-3天**
- [ ] 实现纸上交易模式
- [ ] 建立小资金灰度流程
- [ ] 实现一键回滚机制
- [ ] 建立审批流与发布流程
- [ ] 实现上线前检查清单（含监控开关、阈值校验）
- [ ] 创建上线运维手册（含监控与回滚演练）

**交付物：**
- qraft/deployment/grayscale.py
- 上线检查清单
- 运维手册

### ✅ 任务6.3：TUI 运行态监控与远程交互
**预计耗时：1-2天**
- [ ] 在 TUI 中新增 Monitor 面板：展示 Runner/Search 关键实时指标、质量闸门与金套件状态摘要；默认从本地文件化指标/日志汇总读取
- [ ] 支持 SSH 端口转发查看远端导出指标（可选）：提供示例命令与参数说明（不引入后台守护进程）
- [ ] 低占用与无竞态：单线程渲染，采集异步节流，确保与主流程零竞争

**交付物：**
- qraft/tui/panels.py（扩展）
- docs/examples/tui_monitor.md

---

## 第7阶段：稳定性与增强（第8周及后续）

### ✅ 任务7.1：开源依赖升级SOP
**预计耗时：持续改进**
- [ ] 实现Dependabot/Renovate集成
- [ ] 建立分层验证清单
- [ ] 实现升级验证流水线
- [ ] 建立回滚与监控机制
- [ ] 创建UPGRADELOG生成器
- [ ] 完善升级SOP文档

### ✅ 任务7.2：性能优化与稳定性
**预计耗时：持续改进**
- [ ] 实现数值稳定性保障
- [ ] 建立跨平台一致性测试
- [ ] 实现性能基准测试
- [ ] 优化热点计算路径
- [ ] 建立压力测试框架
- [ ] 实现自动化回归检测

#### TUI 重构（统一 Dashboard）计划（规划对齐）
- 依据设计与规划文档：
  - 设计方案：<mcfile name="TUI6.0_plan.md" path="/home/dell/Projects/Qraft/docs/TUI6.0_plan.md"></mcfile>
  - 开发规划表：<mcfile name="TUI6.0_task_list.md" path="/home/dell/Projects/Qraft/docs/TUI6.0_task_list.md"></mcfile>
- 工作范围（不改变既有 CLI/API/工件约定）：
  - 引入统一 Dashboard 路由（保留旧 Tab 兼容），四区布局：左侧导航（Flows/Tasks）、中间主工作区、右侧监控栏、底部日志尾巴
  - 监控可信度提升：PID/心跳/host 的活性校验，识别 zombie；最近运行列表与状态徽章
  - 日志尾巴：根据选中 run 实时 tail stdout/stderr，支持暂停/展开更多
  - 表单增强（prompt_toolkit 可选）：路径补全与存在性校验、枚举/布尔/数值/日期选择器、历史记忆、Dry-run 预览；未安装时自动回退基础输入
  - Flows 信息架构映射：Data→Features→Strategy→Search→Backtest→Portfolio→Risk→Reports→Pool→Deploy→Monitor，仅暴露已实现能力，未实现灰态占位
  - 键位与帮助：Tab/Shift+Tab、Enter、/、?、F2
- 里程碑（与文档一致）：
  - M1（P0，1–2天）：右侧迷你监控 + 底部日志尾巴 + 活性校验 + 基础键位
  - M2（P1，1–2周）：四区 Dashboard 骨架与路由切换、Flows 映射、表单增强、跨面板联动、Dry-run 预览
  - M3（P2，1–3周/按需）：过滤与搜索、指标卡片、Artifacts 浏览、主题与状态徽章、远端只读监控（如已具备）
- 交付物：
  - 可运行的 Dashboard 模式与路由开关（F2 与 --dashboard）
  - 迷你监控与日志尾巴组件；MonitorService（活性校验/缓存/轮询节流）
  - 加强版表单（可选 PT），Dry-run 预览串；Flows → CLI 的映射清单
  - 键位帮助与空态引导；Artifacts 只读浏览（按需）
- 风险与回退：
  - prompt_toolkit 不可用：自动回退至基础输入与只读监控，主流程不受阻
  - 活性误判：仅在 pid/host 存在且本机进程消失且心跳超时判为 zombie；否则维持 running 并提示“未确认”
  - 大文件/高频刷新：日志与监控轮询节流（0.5–2s），tail 行数上限与“展开更多”
- 验收标准：
  - 单屏四区联动（监控选中 run → 主区详情与底部日志同步）
  - 运行状态活性校验到位，可识别 zombie，误判下降
  - 表单可用性显著提升（路径补全/选择器/历史/干跑预览），PT 缺失时稳定回退
  - Flows 无功能盲区：已实现可发起，未实现灰态且给出文档跳转

###  任务7.3：文档与培训
**预计耗时：1-2周**
- [ ] 完善API文档与示例
- [ ] 创建用户使用指南
- [ ] 建立最佳实践文档
- [ ] 实现交互式教程
- [ ] 创建故障排查手册
- [ ] 建立社区贡献指南

### 任务7.4：TUI 性能与栈评估（可选，Rust 为备选路线）
**预计耗时：1-2天**
- [ ] 建立 TUI 渲染与占用基准（刷新节流 5–10Hz、CPU/内存开销），提供压测脚本
- [ ] 形成组件栈决策记录：默认 Rich + prompt_toolkit；如需极致性能/复杂图形，评估 Rust ratatui 前端 + CLI 桥接的切换边界与成本
- [ ] 明确迁移触发条件与回退方案

**交付物：**
- scripts/benchmarks/tui_overhead.py
- docs/decision_records/tui_stack.md

---

## 第8阶段：LLM增强层（可选，Alpha）

### 任务8.1：最小可用 LLM 增强器
**预计耗时：2天**
- [ ] 实现 EvidencePack→策略JSON 生成器，失败回退算法通道
- [ ] JSONSchema 校验与算子白名单约束

**交付物：**
- qraft/llm/enhancer.py
- qraft/schemas/strategy_v1.json（复用）

### 任务8.2：Prompt 合约与模板
**预计耗时：1天**
- [ ] 建立 Prompt 模板与版本化管理，注入防护与敏感字段过滤

**交付物：**
- qraft/llm/prompts/

### 任务8.3：CLI 与调用封装（默认关闭）
**预计耗时：1天**
- [ ] 新增 qraft llm propose 子命令，默认关闭，环境变量开关启用
- [ ] 引入成本控制与配额（可选 LiteLLM）

**交付物：**
- qraft/cli/llm_cmd.py
- qraft/llm/client.py（可选）

### 任务8.4：合同测试与金套件等价性
**预计耗时：1-2天**
- [ ] LLM 产出策略需通过质量闸门
- [ ] 新增金套件用例：LLM 通道同门槛等价性

**交付物：**
- tests/unit/test_llm_enhancer.py
- tests/integration/test_golden_llm_equiv.py

### 任务8.5：安全与审计
**预计耗时：1天**
- [ ] 请求/响应留痕入 Evidence（脱敏），注入与越权防护

**交付物：**
- qraft/evidence/llm_trace.py

### 任务8.6：监控与灰度
**预计耗时：1天**
- [ ] 导出 LLM 指标（请求数、tokens、错误率、均价）
- [ ] 在 Runner 灰度流程加入 LLM 策略的单独灰度与一键回滚

**交付物：**
- qraft/monitoring/exporters.py（扩展）
- qraft/deployment/grayscale.py（扩展）

---

## 验收标准与门槛

### 🎯 硬门槛（必须通过）
- ✅ 冷启动复跑核心指标波动 < 1%
- ✅ 两阶段一致性关键指标差 < 2%
- ✅ 成本敏感性Top-N重叠率 ≥ 70%
- ✅ 泄漏与对齐器单测全通过
- ✅ 双通道同门槛验证通过
- ✅ 金套件回归检测通过

### 📊 软指标（持续改进）
- 📈 策略池质量与多样性
- 📈 回测执行性能
- 📈 LLM增强效果（可选）
- 📈 监控覆盖度
- 📈 文档完备性

---

## 风险控制与应急预案

### ⚠️ 主要风险点
1. **开源依赖兼容性**：版本锁定 + 适配层 + 回退机制
2. **数值稳定性**：统一环境 + 确定性配置 + 跨平台测试
3. **LLM集成复杂度**：可选架构 + 失败回退 + 独立验证
4. **性能瓶颈**：基准测试 + 热点监控 + 渐进优化

### 🚨 应急预案
- **开发延期**：优先MVP功能，延后可选增强
- **集成问题**：回退上个稳定版本，修复后重新集成
- **性能问题**：启用缓存，优化热点，必要时降级精度
- **质量门槛**：调整阈值，增加测试覆盖，强化验证

---

## 总结

这个开发规划表将Qraft 6.0的实现分解为7个阶段，共计约8周的开发周期。每个任务都有明确的交付物和验收标准，确保能够平稳推进项目落地。

关键成功因素：
1. **严格遵循算法优先、LLM后置的架构原则**
2. **基于成熟开源组件，最小化自研风险**
3. **契约测试驱动，确保质量门槛**
4. **分层解耦，支持渐进式演进**
5. **全链路可复现，支持灰度与回滚**

建议按照此规划表逐步执行，每完成一个里程碑进行验收评估，确保项目按期高质量交付。