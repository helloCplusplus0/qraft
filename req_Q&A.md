## 应用名称：Qraft
Quant + Craft，精工细作的量化平台

## 应用的功能：
- 一个功能完备且自由度极高的数据分析，探索，研究中台
- 一个轻量化，高性能专业度极高的量化交易平台

## 用户画像：
- 个体数据科学家（从事跨领域且广泛的数据分析，探索，研究的人员）
- 个体量化专家 （从事量化交易，量化研究，量化分析的人员）
- 注意：针对个体，不是团队，应该保持灵活，专业，且成本可控，轻而精，禁止大而全

## 应用不应该是什么：
- 应用不应该是对标机构，组织的另一个专业的量化分析工具，平台
- 应用不应该是大而全，构建成本极高，极昂贵，极复杂的应用平台

## 应用应该是什么：
- 应用应该设计精良而专业，功能强大而自由，性能卓越而高效
- 应用应该在有限软硬件资源下，能够提供强大的功能，性能，自由度，成本可控
- 应用应该赋予用户极大的自由度，可以分析不同数据源，采用不同算法，可以采用不同编程语言从事跨领域分析
- 应用应该灵活而敏捷，不会出现重大历史遗留问题，难以灵活变更开发和设计路线
- 应用应该提供一个专业且完备的数据分析中台功能
- 应用应该提供一个专业且完备的量化交易平台功能
- 应用应该实现贝叶斯式的分析探索路径（假设->验证->反馈->结论...螺旋循环）
- 应用应该引入大模型协助用户实现自动化，半自动化分析，探索，研究

## 引入大模型辅助能力边界考虑：
- 轻中量级，f(x...) = y 函数式的算法分析任务应该直接机器运行算法，得出结论
- 重量级算法任务（机器学习，需要GPU加速...）资源需求量巨大的算法分析任务，应该直接采用大模型（gpt,sonnet,qwen...）api代替，辅助分析决策
- 非理性，重大执行决策环节，应该由人脑基于所有的分析结论，做出决策

## 大模型辅助方式考虑：
- 付费使用多个顶级大模型（gpt,sonnet,qwen...）api,针对同一环节进行多方，多角度辅助分析决策，确保稳定性
- 优先考虑引入设计精良，性能优秀的开源项目，实现多模型辅助决策

## 自动化，半自动化说明：
- 自动化：用户制定计划，应用可以自动在计划内执行分析探索任务，得出结论
- 半自动化：在自动化的基础上，用户干预，加入人脑的思考，决策决定分析探索方向，人机共同协作，得出结论

## 应用开发原则：
- 轻量化：
-- 软件工具层面上，应该优先选择架构设计精良，性能卓越，成本可控的工具，禁止引入设计庞大而复杂架构的工具
-- 编程语言层面上，应该优先考虑性能高，资源消耗低，开发效率高的语言
- 极致性能：架构设计精良，高性能编程语言
- 稳定：设计完备性，架构设计合理性，代码健壮性，bug风险低
- 可扩展：架构设计合理性，高度解耦，可扩展性强
- 并发无竟态：合适并发运行，提升效率

## 编程语言考虑：
- 优先使用rust,cpp,go高性能，高效率语言
- 其次兼顾python,js,ts语言
- 数据分析领域后备语言：python,julia

## 引入开源项目的考虑：
- 优先引入架构先进，功能完备，社区活跃，团队可持续稳定推进，性能卓越，成本可控的开源项目，避免重复造轮子
- 优先通过引入架构性开源项目，最大程度实现高效联调其他开源功能性项目，避免全局性的源代码设计带来的繁重开发负担
- 全局源代码设计最小化，优先在优秀的开源框架下，进行局部性的源代码设计

## 开源项目资料列表：
- [dev_tools_fix.md](./dev_tools_fix.md)
- 以大模型自身训练所获得的知识，综合评估筛选合适的开源项目

## 架构层设计
### 中台职责边界：数据中台是否需要包含数据源管理、ETL/ELT、元数据管理、版本管理等完整模块？还是更偏向“轻量化探索式数据中台”，以 notebook 式分析驱动为主？
- 我觉得notebook 式用完数据就丢，不利于长期分析探索研究，不利于成果沉淀
- 中台应该考虑数据源管理，ETL/ELT，元数据管理，版本管理等完整模块
- 中台的设计应该始终遵循开发原则

### 模块间通信：后台微服务之间通信方式倾向 gRPC、Message Queue、还是简单 REST？是否有跨语言（如 Rust 模块与 Python 分析脚本协作）通信需求？
- 在确保性能的前提下，做好解耦，轻量化，实现难度等多方面平衡
- 可能存在多语言协同问题，因为我们优先语言：rust,cpp,go;其次是：python,js,ts

### 插件化机制:是否考虑支持用户自定义插件？如用户引入自己的指标算法、数据适配器、交易策略脚本等？
- 应用应该给与用户充分的自由度，用户的算法，适配器，脚本不应该游离于应用架构之外，应用架构应当提前有所考虑和支持，以便实现最佳的执行效果

## 量化引擎核心
### 策略执行 vs 模拟回测：回测是否要支持 Tick/分钟/日级别？是否需要模拟滑点、交易成本、资金约束等真实交易因素？
- 我觉得应该越精细越完备越好
- 我建议优先引入完备的开源项目，不要重复造轮子，一切以开源项目实际实现为准

### 实盘执行引擎：期望 Qraft 具备连接真实交易所 API（如 Binance, IBKR, Alpaca）直接下单的能力？还是策略建议/信号由 Qraft 生成，人工执行下单？
- 实盘交易能力是必须的，核心的，关键的，这部分可以根据实际情况，

### 风控与监控模块：是否需要内置策略级/账户级风控？例如仓位管理、最大回撤警告、实时风险信号等？
- 风控与监控是完备的体现，所以应该具备

## 可编程性与语言集成
### 编程入口层设计：用户是否需要 Web 端代码输入/运行？还是你更倾向于将外部脚本（如 .py, .rs）调用集成？
- 如果引入完备的开源项目，以开源项目实际设计为准
- 我觉得应该保持轻量，简洁，没有web端，专门设计web端不符合开发原则，编码直接在IDE内完成，还由大模型辅助编码，这

### 是否需要 Jupyter Notebook 集成？或更轻量的 REPL/Script 执行环境？
- 如果设计允许 Jupyter Notebook 或者 REPL/Script 环境，可以顺理成章的集成

### 多语言执行集成方式：多语言模块如何交互？例如 Rust 核心调用 Python 脚本？是否使用 WebAssembly、FFI、RPC 等方式？
- 如果引入完备的开源项目，以开源项目实际设计为准
- WebAssembly、FFI、RPC应该优先在性能，轻量化，实现难度，架构匹配等因素综合评估后，再做决定

### 是否希望允许用户选择特定模块所用语言（如策略写 Python，核心撮合用 Rust）？
- 如果引入完备的开源项目，以开源项目实际设计为准
- 用户不需要自由选择实现语言，策略用什么语言，核心撮合用什么语言，应该提前根据极致性能要求设计好，并提供给用户使用

## 数据处理与仓库设计
### 数据存储设计：是否有统一的“数据仓库”模块需求？比如统一格式化的历史行情、研究数据存储？
- 如果引入完备的开源项目，以开源项目实际设计为准
- 我觉得应该有“数据仓库需求”

### 对存储方案有无预期（如 SQLite + Arrow、DuckDB、Parquet+S3、PostgreSQL + Timescale）？
- 如果引入完备的开源项目，以开源项目实际设计为准
- 优先考虑新技术，新方案的同时，兼顾性能，成本，实现难度，架构匹配等因素综合评估后，再做决定

### 数据接入与同步：数据源是否主要为本地数据？还是需要支持 API 拉取（如 Tushare、Yahoo、金融终端数据等）？
- 没有本地数据，数据有两个渠道：通过爬虫获取；通过API获取

## 大模型协同模块
### 分析与决策辅助界面：大模型如何参与：是以“提示语交互”（prompt-driven workflow）方式参与，还是作为分析流程节点的内嵌组件？
- 大模型辅助部分优先采用完备的开源项目，以开源项目实际设计为准，不应该深入设计开发
### 是否期望模型可以自动生成策略代码、数据处理流程、调参等内容？
- 大模型辅助部分优先采用完备的开源项目，以开源项目实际设计为准，不应该深入设计开发

### 多模型管理机制：你期望如何管理多个大模型？是否需要支持例如：单点切换（选择 GPT vs Claude），决策投票机制（多模型同时分析 -> 用户决策）统一接口封装（通过统一 SDK 封装各模型调用）
- 大模型辅助部分优先采用完备的开源项目，以开源项目实际设计为准，不应该深入设计开发

## 部署与运行
### 用户本地运行预期：用户预期部署平台的环境是？
- 我预想部署应该分两部分：线上部署，本地部署
- 线上部署：我可以将核心功能和网络时效功能部署到云端服务器，比如（数据拉取，量化执行）
- 本地部署：由于高性能云计算资源非常昂贵，不适合长期使用，所以我会将时效性不高的数据分析算法执行部署到本地，通过本地主板集群，实现成本可控，性能可控
- 由于优先引入开源项目，如果开源项目提供容器部署，就采用容器部署，如果没有提供容器部署，为了和项目同步方便，将不采用容器部署
- 运行方式以开源项目实际设计为准，我更倾向于轻量化的展示，比如以终端作为展示，而不是web端

### 安装与运行门槛：是否期望无依赖安装方式（如静态编译、单文件 CLI 工具）？
- 如果引入完备的开源项目，以开源项目实际设计为准
- 我倾向于轻量化，无依赖

### 是否会考虑提供 Web UI、CLI、或 Desktop App（如 Electron、Tauri）？
- 如果引入完备的开源项目，以开源项目实际设计为准
- 桌面端我倾向于使用终端展示，移动端倾向于跨平台app方案，比如（flutter等）

## 文档、流程与用户体验
### 贝叶斯式流程器 UI/逻辑：是否需要图形化界面（如 DAG 或流程图）表示“假设-实践-反馈-新认知”分析路径？
- 如果引入完备的开源项目，以开源项目实际设计为准
- 可以流程如果可以固定，应该固定

### 这个流程器是否允许用户保存、重跑、版本控制分析流程？
- 可以保持，重跑，版本控制
- 每一个流程就相当于一次实验，甚至应该专门将每一次实验每一个环节进行保存，作为实验记录，同时也可以提供给大模型上下文

## 生命周期与迭代机制
### Qraft 应用是否会长期迭代？是否考虑版本演进机制？
- 我的预期是首先实现功能完备的数据分析，探索，研究的中台，优先引入完备的开源项目
- 其次实现功能完备的量化交易平台，优先引入完备的开源项目

### 你是否需要定义某种“插件/模块生命周期规范”？
- 当前我还没有理解为啥需要插件的原因，如果插件设计是最佳实践方案，应该会考虑并且按照最佳实践设计，不过还是优先引入完备的开源项目

## 模型辅助边界细化
### 是否希望本地运行部分轻量模型（如 GGUF 版 LLM）进行提示辅助？
- 我当前的认识是：除了顶级大模型的辅助效果勉强可以接受，其他小模型的效果应该不会太好，自己部署模型不是明智之举，除非可以证明合适的本地模型效果满意，成本可控，引入本地模型是明智之举

### 是否需要多模型协同决策结果“结构化输出”？
- 这个统一格式化可以考虑

##  用户数据管理与“分析资产沉淀”
### 是否需要提供用户分析数据资产的“持久化 + 快速检索 + 标签管理”功能？
- 我不认为notebook用完就丢的数据分析方式是最佳，因为我本身没有本地数据，所以数据对我非常重要，我应该想方设法将数据保存下来，并且可以快速检索，标签管理，甚至应该部署专业的“数据仓库”，以便分析，研究，探索

### 是否会区分“原始数据”、“中间结果”、“最终报告”这三类数据？是否分别处理、缓存、索引？
- 的确应该区分和管理，原始数据用于长期分析，研究，探索
- 中间结果可能需要被引用
- 最终报告可能是一种分析，研究，探索的成果，应该被沉淀

## 回测框架可组合性
### 你期望的回测框架是否需要支持如下可组合结构？数据提供器：可替换数据源；策略执行器：支持状态保存与加载；撮合引擎：支持切换成交机制；成本模型：支持滑点、手续费、税收、买卖价差等灵活配置
- 优先引入完备的开源项目，以开源项目实际设计为准，有多个选择的化，应该考虑设计更完备，功能更灵活的项目

## 容错与失败处理机制
### 你是否有“失败最小化”或“错误回退机制”的需求？例如网络失效、数据源失效、大模型接口超时，是否希望系统具备降级机制或备份逻辑？
- 优先引入完备的开源项目，以开源项目实际设计为准
- 容错与失败处理机制是完备的体现，如果开源项目有提供，应该优先考虑使用

## 项目结构与分层治理
### 你是否希望项目具备明确的分层结构？例如：
-核心执行引擎层（Rust/C++）
-通用数据中台层（Go/Python）
-策略与分析层（Python/REPL）
-模型辅助接口层（多模型抽象）
-插件适配层（跨语言通信支持）
- 优先引入完备的开源项目，以开源项目实际设计为准
- 我不希望将应用作出一个单体，任何一处出错将整体崩溃
- 我更倾向于微服务式的架构，这样可以确保每一块功能的专业性，且可以自由扩展，这必须有良好的底层框架作为支撑

## 用户交互范式与终端使用方式：是否计划支持“命令式交互工作流”？例如通过 CLI 中的命令语句（或 YAML 任务定义）执行数据探索、分析、建模、回测、实盘等？
- 优先引入完备的开源项目，以开源项目实际设计为准
- 单纯的cli交互不可取，我倾向于采用TUI形式代替web，真实考虑是更加的轻量化和高性能

## 任务调度与异步执行：是否需要一个轻量的任务调度器？如支持定时拉取数据、定时执行策略回测、定时更新模型结果等？
- 优先引入完备的开源项目，以开源项目实际设计为准
- 针对通过爬虫获取的数据，应该支持定时拉取，针对通过api获取数据，应该保持持续运行的状态
- 应该考虑周期性执行的任务和非周期性自动执行任务

## 是否需要异步任务的状态监控机制（任务队列、执行日志、本地缓存）？
- 可能需要，一切以实际续期为准

## 开源项目选型策略：是否有明确的“优先评估维度”？（例如：活跃度、最近提交、Issue 响应速度、核心依赖情况、许可证类型…）
- 优先从我所关注的开源项目列表中选取：[dev_tools_fix.md](./dev_tools_fix.md)
- 其次是大模型所具有的最新信息综合评估推荐
- 所选择的开源项目应该契合实际需求设计，应该功能完备，性能卓越，成本可控，社区活跃，团队可持续

## 是否会将选型过程文档化（如开源适配优先列表），以支持后续迭代优化？
- 这是一个好设计，保持记录，以支持后续迭代优化

## 数据生命周期治理：是否需要“自动数据生命周期管理”策略？如：旧数据归档、冷热数据分层、数据删除策略？
- 优先考虑引入“数据仓库”开源项目，以开源项目实际设计为准

## 是否需要构建数据血缘关系追踪？例如一个分析结果由哪些原始数据生成，哪些模型中间步骤参与？
- 优先考虑引入“数据仓库”开源项目，以开源项目实际设计为准

##  模型辅助的行为记录 / 复现机制：是否期望模型参与分析决策时，能记录完整的 prompt/响应历史、提示词版本、调用时间等？便于未来复查/对比？
- 优先考虑引入“AI辅助”相关开源项目，以开源项目实际设计为准

## 代码生命周期治理：是否希望支持“长期可维护”的代码结构管理，如模块依赖规范化、分层接口设计、开源贡献指南（若将来计划开放部分代码）？
- 优先考虑引入相关开源项目，以开源项目实际设计为准
- 必须考虑如何同步跟随开源项目升级